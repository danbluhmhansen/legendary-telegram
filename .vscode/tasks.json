{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "buildServer",
			"command": "dotnet",
			"type": "process",
			"args": [
				"build",
				"${workspaceFolder}/Source/Server/BlazorApp1.Server.csproj",
				"/property:GenerateFullPaths=true",
				"/consoleloggerparameters:NoSummary"
			],
			"problemMatcher": "$msCompile"
		},
		{
			"label": "buildClient",
			"command": "dotnet",
			"type": "process",
			"args": [
				"build",
				"${workspaceFolder}/Source/Client/BlazorApp1.Client.csproj",
				"/property:GenerateFullPaths=true",
				"/consoleloggerparameters:NoSummary"
			],
			"problemMatcher": "$msCompile"
		},
		{
			"label": "buildConsole",
			"command": "dotnet",
			"type": "process",
			"args": [
				"build",
				"${workspaceFolder}/Tests/Console/BlazorApp1.Console.csproj",
				"/property:GenerateFullPaths=true",
				"/consoleloggerparameters:NoSummary"
			],
			"problemMatcher": "$msCompile"
		},
		{
			"label": "publishServer",
			"command": "dotnet",
			"type": "process",
			"args": [
				"publish",
				"${workspaceFolder}/Source/Server/BlazorApp1.Server.csproj",
				"/property:GenerateFullPaths=true",
				"/consoleloggerparameters:NoSummary"
			],
			"problemMatcher": "$msCompile"
		},
		{
			"label": "publishClient",
			"command": "dotnet",
			"type": "process",
			"args": [
				"publish",
				"${workspaceFolder}/Source/Client/BlazorApp1.Client.csproj",
				"/property:GenerateFullPaths=true",
				"/consoleloggerparameters:NoSummary"
			],
			"problemMatcher": "$msCompile"
		},
		{
			"label": "watchServer",
			"command": "dotnet",
			"type": "process",
			"args": [
				"watch",
				"run",
				"/property:GenerateFullPaths=true",
				"/consoleloggerparameters:NoSummary"
			],
			"problemMatcher": "$msCompile",
			"options": {
				"cwd": "${workspaceFolder}/Source/Server/"
			}
		},
		{
			"label": "watchClient",
			"command": "dotnet",
			"type": "process",
			"args": [
				"watch",
				"run",
				"/property:GenerateFullPaths=true",
				"/consoleloggerparameters:NoSummary"
			],
			"problemMatcher": "$msCompile",
			"options": {
				"cwd": "${workspaceFolder}/Source/Client/"
			}
		},
		{
			"label": "watchAll",
			"dependsOn": [
				"watchServer",
				"watchClient"
			],
			"dependsOrder": "parallel",
			"group": "build",
			"problemMatcher": "$msCompile",
			"isBackground": true
		},
		{
			"label": "clean",
			"command": "dotnet",
			"type": "process",
			"args": [
				"clean",
				"${workspaceFolder}"
			],
			"problemMatcher": "$msCompile",
		},
		{
			"label": "dropDatabase",
			"command": "dotnet",
			"type": "shell",
			"args": [
				"ef",
				"database",
				"drop",
				"--project",
				"${workspaceFolder}/${input:dotnetEntityFrameworkProject}",
				"--startup-project",
				"${workspaceFolder}/${input:dotnetEntityFrameworkStartupProject}",
			],
			"problemMatcher": "$msCompile",
		},
		{
			"label": "updateDatabase",
			"command": "dotnet",
			"type": "shell",
			"args": [
				"ef",
				"database",
				"update",
				// "${input:dotnetDatabaseMigration}",
				"--project",
				"${workspaceFolder}/${input:dotnetEntityFrameworkProject}",
				"--startup-project",
				"${workspaceFolder}/${input:dotnetEntityFrameworkStartupProject}",
				// "--connection",
				// "${input:dotnetDatabaseConnectionString}",
			],
			"problemMatcher": "$msCompile",
		},
		{
			"label": "addMigration",
			"command": "dotnet",
			"type": "shell",
			"args": [
				"ef",
				"migrations",
				"add",
				"${input:dotnetMigrationsName}",
				"--project",
				"${workspaceFolder}/${input:dotnetEntityFrameworkProject}",
				"--startup-project",
				"${workspaceFolder}/${input:dotnetEntityFrameworkStartupProject}",
				"--context",
				"${input:dotnetEntityFrameworkContext}",
				"--output-dir",
				"${input:dotnetMigrationsOutputDir}"
			],
			"problemMatcher": "$msCompile",
		},
	],
	"inputs": [
		{
			"id": "dotnetEntityFrameworkContext",
			"type": "promptString",
			"description": "The DbContext to use.",
			"default": "ApplicationDbContext",
		},
		{
			"id": "dotnetEntityFrameworkProject",
			"type": "promptString",
			"description": "The project to use.",
			"default": "Source/Server/",
		},
		{
			"id": "dotnetEntityFrameworkStartupProject",
			"type": "promptString",
			"description": "The startup project to use.",
			"default": "Source/Server/",
		},
		{
			"id": "dotnetDatabaseMigration",
			"type": "promptString",
			"description": "The target migration. Migrations may be identified by name or by ID. The number 0 is a special case that means before the first migration and causes all migrations to be reverted. If no migration is specified, the command defaults to the last migration.",
			"default": "99999999999999_Seed",
		},
		{
			"id": "dotnetDatabaseConnectionString",
			"type": "promptString",
			"description": "The connection string to the database.",
			"default": "Host=localhost;Port=5432;Database=blazor_app_db;Username=my_user;Password=my_pw",
		},
		{
			"id": "dotnetMigrationsName",
			"type": "promptString",
			"description": "The name of the migration.",
		},
		{
			"id": "dotnetMigrationsOutputDir",
			"type": "promptString",
			"description": "The directory to put files in. Paths are relative to the project directory. Defaults to 'Migrations'.",
			"default": "Migrations",
		},
	]
}
